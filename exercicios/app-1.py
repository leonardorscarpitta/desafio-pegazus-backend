#1- usando o json abaixo, retire somente os produtos em que o preço seja maior do que 30 Reais 
#Explique detalhadamente por que voce decidiu essa solução e não outra

import json

response = [
    {
        "nome": "Loja Exemplo 1",
        "endereço": {
            "rua": "Rua Exemplo 1",
            "cidade": "Exemplo City 1"
        },
        "produtos": [
            {"id": 1, "nome": "Produto A", "preço": 29.99},
            {"id": 2, "nome": "Produto B", "preço": 34.99}
        ]
    },
    {
        "nome": "Loja Exemplo 2",
        "endereço": {
            "rua": "Rua Exemplo 2",
            "cidade": "Exemplo City 2"
        },
        "produtos": [
            {"id": 1, "nome": "Produto C", "preço": 45.50},
            {"id": 2, "nome": "Produto D", "preço": 15.00}
        ]
    },
    {
        "nome": "Loja Exemplo 3",
        "endereço": {
            "rua": "Rua Exemplo 3",
            "cidade": "Exemplo City 3"
        },
        "produtos": [
            {"id": 1, "nome": "Produto E", "preço": 22.00},
            {"id": 2, "nome": "Produto F", "preço": 39.99}
        ]
    },
    {
        "nome": "Loja Exemplo 4",
        "endereço": {
            "rua": "Rua Exemplo 4",
            "cidade": "Exemplo City 4"
        },
        "produtos": [
            {"id": 1, "nome": "Produto G", "preço": 55.00},
            {"id": 2, "nome": "Produto H", "preço": 5.99}
        ]
    },
    {
        "nome": "Loja Exemplo 5",
        "endereço": {
            "rua": "Rua Exemplo 5",
            "cidade": "Exemplo City 5"
        },
        "produtos": [
            {"id": 1, "nome": "Produto I", "preço": 33.00},
            {"id": 2, "nome": "Produto J", "preço": 27.50}
        ]
    }
]

# Criar um dicionario para armazenar os valores para serem adicionados em um arquivo json novo
dictionary = {}

# Navega por todos os itens da lista de JSON nomeada "response"
for loja in response:
    produtos = loja.get("produtos", [])

    # Criar uma variável para guardar as informações que um produto deve ter para ser considerado "válido"
    produtos_validos = [produto for produto in produtos if produto.get("preço", 0) <= 30]

    # Atualiza o dicionário com a lista de produtos válidos para cada loja
    if produtos_validos:
        dictionary[loja["nome"]] = produtos_validos
        print(produtos_validos)

# Guardar essas informações atualizadas em um arquivo JSON - se o arquivo não existir, o programa deve criar um automaticamente
with open("app-1.json", "w", encoding="utf-8") as json_file:
    json.dump(dictionary, json_file, ensure_ascii=False, indent=4)
